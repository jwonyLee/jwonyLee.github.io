---
layout: post
title: ARCë€ ë¬´ì—‡ì¸ì§€ ì„¤ëª…í•˜ì‹œì˜¤.
subtitle: iOSInterviewquestions
categories: iOSInterviewquestions
tags: [ARC, iOSInterviewquestions]
emoji: ğŸ’¾
---

## RC(Reference Counting)

ì• í”Œì—ì„œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•

- ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê±°ë‚˜, ë©”ëª¨ë¦¬ í¬ì¸í„°ë¥¼ **ì°¸ì¡°**í•  ë•Œ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ ì¦ê°€
- ì‚¬ìš©ì„ ì™„ë£Œí•˜ë©´ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ ê°ì†Œ

## MRC(Manual Reference Counting)

- ê°œë°œìê°€ ì§ì ‘ ì°¸ì¡° ê´€ë¦¬

## ARC(Automatic Reference Counting)

- ì»´íŒŒì¼ íƒ€ì„ì— ìë™ìœ¼ë¡œ êµ¬ë¬¸ ë¶„ì„ í›„ ì ì ˆí•˜ê²Œ ë ˆí¼ëŸ°ìŠ¤ ê°ì†Œ ì½”ë“œ ì‚½ì…
- ì‹¤í–‰ ì¤‘ì— ë³„ë„ì˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŒ
- ì°¸ì¡° ì¹´ìš´íŒ…ì€ í´ë˜ìŠ¤ì˜ **ì¸ìŠ¤í„´ìŠ¤ì—ë§Œ** ì ìš©
    - êµ¬ì¡°ì²´ì™€ ì—´ê±°ì²´ëŠ” ì°¸ì¡° íƒ€ì…ì´ ì•„ë‹ˆë¼, ê°’ íƒ€ì…ì´ë¼ì„œ ì°¸ì¡°ì˜ í˜•íƒœë¡œ ì €ì¥ë˜ê±°ë‚˜ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
    - ê°’ íƒ€ì…(value type)ì€ ìŠ¤íƒì´ë¼ëŠ” ì •ì  ë©”ëª¨ë¦¬ ê³µê°„ì— ìƒê¸°ëŠ” ê²ƒì´ë¼ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬ì˜ ëŒ€ìƒì´ ì•„ë‹˜

### ARCì˜ ì‘ë™ ë°©ì‹

í´ë˜ìŠ¤ì— ëŒ€í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•  ë•Œë§ˆë‹¤, ARCëŠ” í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•œë‹¤. ì´ ë©”ëª¨ë¦¬ëŠ” í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì… ì •ë³´ ë°, ê·¸ ì¸ìŠ¤í„´ìŠ¤ì™€ ê²°í•©ëœ ëª¨ë“  ì €ì¥ ì†ì„±ì˜ ê°’ë“¤ì„ í•¨ê»˜ ê°€ì§€ê³  ìˆë‹¤.

ì¸ìŠ¤í„´ìŠ¤ê°€ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì„ ê²½ìš°, ARCëŠ” í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ì—¬ í™•ë³´í•œë‹¤. ê·¸ ë©”ëª¨ë¦¬ëŠ” ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì´ëŠ” í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ë” ì´ìƒ í•„ìš”ì—†ëŠ” ê²½ìš° ë©”ëª¨ë¦¬ ê³µê°„ì„ ì°¨ì§€í•˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤.

ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•œ ë™ì•ˆì— í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ë¼ì§€ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´, ARCëŠ” ê°ê°ì˜ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ì†ì„±, ìƒìˆ˜, ë³€ìˆ˜ë¥¼ ì¶”ì í•œë‹¤. ARCëŠ” í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ í™œì„±í™”ëœ(active) ì°¸ì¡°ê°€ í•˜ë‚˜ë¼ë„ ì¡´ì¬í•œë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ì˜ í• ë‹¹ì„ í•´ì œí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ê²ƒì„ ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° ìœ„í•´, í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì†ì„±, ìƒìˆ˜, ë³€ìˆ˜ì— í• ë‹¹í•  ë•Œë§ˆë‹¤, í•´ë‹¹ ì†ì„±, ìƒìˆ˜, ë³€ìˆ˜ëŠ” ê·¸ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ **ê°•í•œ ì°¸ì¡°(strong reference)**ë¥¼ ë§Œë“ ë‹¤. ì´ ì°¸ì¡°ë¥¼ ê°•í•œ(strong) ì°¸ì¡°ë¼ê³  í•˜ëŠ” ì´ìœ ëŠ” ì´ê²ƒì´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê½‰ ì¥ê³  ìˆì–´ì„œ, í•´ë‹¹ ê°•í•œ ì°¸ì¡°ê°€ ë‚¨ì•„ ìˆëŠ” ë™ì•ˆ í• ë‹¹ì´ í•´ì œë˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

### í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ê°•í•œ ì°¸ì¡° ìˆœí™˜

í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ê°•í•œ ì°¸ì¡°ë¥¼ ì—†ì• ëŠ” ê²ƒì´ ì ˆëŒ€ë¡œ(never) ì•ˆë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ëŠ” ë‘ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì„œë¡œì— ëŒ€í•œ ê°•í•œ ì°¸ì¡°ë¥¼ ì¥ê³  ìˆì–´ì„œ, ê° ì¸ìŠ¤í„´ìŠ¤ê°€ ì„œë¡œ ê³„ì† ì‚´ì•„ìˆê²Œ ë  ë•Œ ë°œìƒí•œë‹¤. ì´ë¥¼ ê°•í•œ ì°¸ì¡° ìˆœí™˜(strong reference cycle)ì´ë¼ê³  í•œë‹¤.

![arc-1](/assets/image/arc-1.png)

![arc-2](/assets/image/arc-2.png)

`john`ê³¼ `unit4A` ë³€ìˆ˜ì˜ ê°•í•œ ì°¸ì¡°ë¥¼ ëŠë”ë¼ë„, ì°¸ì¡° ê°œìˆ˜ëŠ” 0ìœ¼ë¡œ ë–¨ì–´ì§€ì§€ ì•Šê³ , ì¸ìŠ¤í„´ìŠ¤ëŠ” ARCì— ì˜í•´ í•´ì œë˜ì§€ ì•ŠëŠ”ë‹¤.

ê°•í•œ ì°¸ì¡° ìˆœí™˜ì€ `Person`ê³¼ `Apartment` ì¸ìŠ¤í„´ìŠ¤ê°€ í•´ì œë˜ëŠ” ê²ƒì„ ë§‰ìœ¼ë¯€ë¡œ, ì•±ì—ì„œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. (`Person` ì¸ìŠ¤í„´ìŠ¤ì™€ `Apartment` ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ê°•í•œ ì°¸ì¡°ê°€ ë‚¨ì•„ ìˆìœ¼ë¯€ë¡œ)

### í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì´ì˜ ê°•í•œ ì°¸ì¡° ìˆœí™˜ í•´ê²°í•˜ê¸°

- ì•½í•œ ì°¸ì¡° (weak reference)

    ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì˜ ìˆ˜ëª…ì´ ë” ì§§ì„ ë•Œ ì‚¬ìš©í•œë‹¤. (ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì˜ í• ë‹¹ì´ ë¨¼ì € í•´ì œë˜ëŠ” ê²½ìš°)

- ë¬´ì†Œì† ì°¸ì¡° (unowned reference)
ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ê°™ê±°ë‚˜ ë” ê¸´ ìˆ˜ëª…ì„ ê°€ì§ˆ ë•Œ ì‚¬ìš©í•œë‹¤.

ì•½í•œ ì°¸ì¡°ì™€ ë¬´ì†Œì† ì°¸ì¡°ëŠ” ì°¸ì¡° ìˆœí™˜ì— ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ê°€ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°•í•˜ê²Œ ì¥ê³  ìˆì§€ ì•Šì•„ë„(without) ì°¸ì¡°í•˜ë„ë¡ í•´ì¤€ë‹¤. ì´ ì¸ìŠ¤í„´ìŠ¤ë“¤ì€ ê°•í•œ ì°¸ì¡° ìˆœí™˜ì„ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ì„œë¡œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

### Weak References (ì•½í•œ ì°¸ì¡°)

ì°¸ì¡°í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°•í•˜ê²Œ ì¥ì§€ ì•ŠëŠ” ì°¸ì¡° â†’ ARCê°€ ì°¸ì¡°ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì²˜ë¶„í•˜ëŠ” ê²ƒì„ ì¤‘ì§€í•˜ì§€ ì•ŠìŒ

> ARCê°€ ì•½í•œ ì°¸ì¡°ë¥¼ `nil`ë¡œ ì„¤ì •í•  ë•ŒëŠ” property observersê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.

### Unowned References (ë¬´ì†Œì† ì°¸ì¡°)

ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ê°™ì€ ìˆ˜ëª… ë˜ëŠ” ë” ê¸´ ìˆ˜ëª…ì„ ê°€ì§€ê³  ìˆì„ ë•Œ ì‚¬ìš©

í•­ìƒ ê°’ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ê³ , ì˜µì…”ë„ì´ ë  ìˆ˜ ì—†ìœ¼ë©°, ARCëŠ” ì ˆëŒ€ë¡œ ë¬´ì†Œì† ì°¸ì¡°ì˜ ê°’ì„ `nil`ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ìŒ

> ë¬´ì†Œì† ì°¸ì¡°ëŠ” í•´ë‹¹ ì°¸ì¡°ê°€ í•´ì œë˜ì§€ ì•Šì€ ì¸ìŠ¤í„´ìŠ¤ë§Œ í•­ìƒ ì°¸ì¡°í•œë‹¤ê³  í™•ì‹ í•  ìˆ˜ ìˆì„ë•Œë§Œ ì‚¬ìš©
í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ê°€ í•´ì œëœ í›„ì— ë¬´ì†Œì† ì°¸ì¡°ì˜ ê°’ì— ì ‘ê·¼í•˜ë ¤ê³  í•˜ë©´, ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒ

---

## ì°¸ê³ ìë£Œ

- [í”„ë¡œí¼í‹° get, set, didSet, willSet in iOS](https://medium.com/ios-development-with-swift/í”„ë¡œí¼í‹°-get-set-didset-willset-in-ios-a8f2d4da5514)
- [Swift 5.2: Properties (ì†ì„±)](https://xho95.github.io/swift/language/grammar/property/2020/05/30/Properties.html)
- [[iOS Swift] RC, ARC ì™€ MRC ë€? ê·¸ë¦¬ê³  Strong, Weak, Unowned ëŠ”? ê°„ë‹¨í•˜ê²Œ ì ì–´ë´¤ìŠµë‹ˆë‹¤.](https://medium.com/@jang.wangsu/ios-swift-rc-arc-ì™€-mrc-ë€-ê·¸ë¦¬ê³ -strong-weak-unowned-ëŠ”-ê°„ë‹¨í•˜ê²Œ-ì ì–´ë´¤ìŠµë‹ˆë‹¤-988a293c04ac)
- [Swift 5.3: Automatic Reference Counting (ìë™ ì°¸ì¡° ì¹´ìš´íŒ…)](https://xho95.github.io/swift/language/grammar/arc/automatic/reference/counting/2020/06/30/Automatic-Reference-Counting.html#fn:reference-type)