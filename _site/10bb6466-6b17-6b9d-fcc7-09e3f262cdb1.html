<!DOCTYPE html>
<html>
    <script type="application/json" id="pagePermalinks">
    {
        
        "optional-이란-무엇인지-설명하시오": "/7972af36-2e95-e5a9-936b-b2d8008d0dd2", 
        
        "tableview-reloadsections-with": "/6818f72c-8679-19ea-5849-0fa044b8e138", 
        
        "테이블뷰-셀-터치-후-다른-뷰로-이동한-뒤에-다시-돌아왔을-때-포커스-없애기": "/9725d37e-e0e5-a1ed-f4fc-97a20479f6c8", 
        
        "mvc-구조에-대해-블록-그림을-그리고-각-역할과-흐름을-설명하시오": "/048e70ef-9d22-1bdd-7eaf-6ff020589788", 
        
        "delegate-패턴을-활용하는-경우를-예를-들어-설명하시오": "/acb464ba-05ef-d1f8-d186-8452b3c43600", 
        
        "delegates와-notification-방식의-차이점에-대해-설명하시오": "/9ba05cc2-3d59-2b87-ea58-f3e733d6be01", 
        
        "fast-enumeration-이란-무엇인지-설명하시오": "/9740e81d-a83f-61b9-05b2-bbae589cb348", 
        
        "kvo-동작-방식에-대해-설명하시오": "/41c517d9-8d30-b798-dc70-778ecc8eeba4", 
        
        "멀티-쓰레드로-동작하는-앱을-작성하고-싶을-때-고려할-수-있는-방식들을-설명하시오": "/1ed82824-eb50-f1aa-3b78-7d9d67ca19f5", 
        
        "프로토콜이란-무엇인지-설명하시오": "/6f275a5a-09f0-5f53-7915-468b140ff59a", 
        
        "singleton-패턴을-활용하는-경우를-예를-들어-설명하시오": "/7a278d9b-ab71-5000-e7a8-be05b116af61", 
        
        "struct-가-무엇이고-어떻게-사용하는지-설명하시오": "/2c42b7f6-d4e0-db2b-d0b7-4bdd7d750dfb", 
        
        "instance-메서드와-class-메서드의-차이점을-설명하시오": "/5c700d5d-fd29-8292-6da1-c293485aabc2", 
        
        "hashable이-무엇이고-equatable을-왜-상속해야-하는지-설명하시오": "/cc011585-af44-56be-eb26-97493639019e", 
        
        "탈출-클로저에-대하여-설명하시오": "/110c7a71-3d8e-f97e-14d9-24d6c28778f1", 
        
        "extension에-대해-설명하시오": "/1b55afe8-60cf-8c94-0be0-14f2859f9e38", 
        
        "접근-제어자의-종류엔-어떤게-있는지-설명하시오": "/4a1becfc-9139-fbe2-ee07-67ed68e3de10", 
        
        "defer가-호출되는-순서는-어떻게-되고-defer가-호출되지-않는-경우를-설명하시오": "/f1365c28-8c8e-c33f-4627-b94b76d3985d", 
        
        "defer란-무엇인지-설명하시오": "/d84661f1-c2b9-4d73-7977-f5678f0c90b1", 
        
        "bounds-와-frame-의-차이점을-설명하시오": "/221ef090-7f3a-cb99-5502-01ff6d90e6a6", 
        
        "실제-디바이스가-없을-경우-개발-환경에서-할-수-있는-것과-없는-것을-설명하시오": "/8dd56bf5-45ae-9862-dc40-fdc26b6c8e2b", 
        
        "앱이-foreground에-있을-때와-background에-있을-때-어떤-제약사항이-있나요": "/2163eba4-0877-e153-25c7-2ea70a310db8", 
        
        "상태-변화에-따라-다른-동작을-처리하기-위한-앱델리게이트-메서드들을-설명하시오": "/d30afc77-e653-1750-2441-cb8efaf43483", 
        
        "nsoperationqueue-와-gcd-queue-의-차이점을-설명하시오": "/7a5cb9b6-0365-2deb-31ac-8867bdb3184a", 
        
        "gcd-api-동작-방식과-필요성에-대해-설명하시오": "/ad09382f-5f7c-c0d8-7b8a-67428b4dbd0b", 
        
        "토이-프로젝트-하면서-알게된-점": "/68384391-8118-fa64-f551-b01da879d361", 
        
        "foundation-kit은-무엇이고-포함되어-있는-클래스들은-어떤-것이-있는지-설명하시오": "/25571d26-a348-8ff2-6398-a899add33df3", 
        
        "notificationcenter-동작-방식과-활용-방안에-대해-설명하시오": "/7770f268-14af-f587-7771-54a2bb9a57b4", 
        
        "하나의-view-controller-코드에서-여러-tableview-controller-역할을-해야-할-경우-어떻게-구분해서-구현해야-하는지-설명하시오": "/ba700875-ce39-9567-5a76-b69390ff8828", 
        
        "app-bundle의-구조와-역할에-대해-설명하시오": "/35d80db8-e942-f7d2-f087-31cd5bde82ba", 
        
        "view-객체에-대해-설명하시오": "/b67ff6f6-143a-2760-26a4-81efbd235844", 
        
        "uiview-에서-layer-객체는-무엇이고-어떤-역할을-담당하는지-설명하시오": "/1cae6cc6-f26e-8a4a-f9c6-a6f0e1ad5277", 
        
        "앱이-시작할-때-main-c-에-있는-uiapplicationmain-함수에-의해서-생성되는-객체는-무엇인가": "/7e14cff5-8a2d-81a5-05f7-de775ca4ad96", 
        
        "모든-view-controller-객체의-상위-클래스는-무엇이고-그-역할은-무엇인가": "/b5bbb478-501f-7d48-0876-a8a3c779bbc5", 
        
        "앱의-콘텐츠나-데이터-자체를-저장-보관하는-특별한-객체를-무엇이라고-하는가": "/4880a67e-ed38-69de-b858-ce92985e8df0", 
        
        "앱-화면의-콘텐츠를-표시하는-로직과-관리를-담당하는-객체를-무엇이라고-하는가": "/6f6c96ec-db60-3f68-0158-dca30f046316", 
        
        "swift의-클로저와-objective-c의-블록은-어떤-차이가-있는가": "/486edc27-d3f9-bed4-099e-f5983ff97baa", 
        
        "스토리보드를-이용했을때의-장단점을-설명하시오": "/c5dfccf5-2b57-6f88-4b0b-c6b25bd2a68d", 
        
        "app-thinning에-대해서-설명하시오": "/aa6857a4-84f0-a3e2-a738-64d58b0cd9c5", 
        
        "global-dispatchqueue-의-qos-에는-어떤-종류가-있는지-각각-어떤-의미인지-설명하시오": "/cd5e1f4f-8164-94cf-a774-bbc775a38cd7", 
        
        "hugging-resistance에-대해서-설명하시오": "/1aa547a5-41c4-8dd1-b435-17560674ca3a", 
        
        "ios-understanding-auto-layout": "/1ef8e42c-7d55-bc67-cbce-85cd58b7a910", 
        
        "left-constraint-와-leading-constraint-의-차이점을-설명하시오": "/1cf039e2-3425-0ddb-02e8-a054c8a9f7b9", 
        
        "arc란-무엇인지-설명하시오": "/b7fdc0a7-7a2a-81cf-ce06-b66f06945afb", 
        
        "anatomy-of-a-constraint": "/91779299-b1d8-f752-efbb-bebf18b9b997", 
        
        "strong-과-weak-참조-방식에-대해-설명하시오": "/7c62d9b2-06d5-65d7-6898-1046353eebd0", 
        
        "contacts-프레임워크-톺아보기": "/8b0a4b90-250f-9ea1-905c-c5c6ffd0f9cc", 
        
        "arc-대신-manual-reference-count-방식으로-구현할-때-꼭-사용해야-하는-메서드들을-쓰고-역할을-설명하시오": "/cddfe26b-169d-567a-5382-8ae53ec547e2", 
        
        "retain-과-assign-의-차이점을-설명하시오": "/22f59356-46ea-4d5a-030f-e9a600736722", 
        
        "강한-순환-참조-strong-reference-cycle-는-어떤-경우에-발생하는지-설명하시오": "/0e5f64f9-ad6d-a804-3131-2c3b871c78f1", 
        
        "autorelease-pool을-사용해야-하는-상황을-두-가지-이상-예로-들어-설명하시오": "/f61fef68-7386-ba55-b341-d15ea08393d4", 
        
        "특정-객체를-autorelease-하기-위해-필요한-사항과-과정을-설명하시오": "/8c462797-aaee-445d-efdc-b532b964984f", 
        
        "mutating-키워드에-대해-설명하시오": "/844246b6-6f5f-10ac-344c-ad6a72e16681", 
        
        "앱이-in-active-상태가-되는-시나리오를-설명하시오": "/ebf8366a-b1c6-8312-3390-591d37f51f88", 
        
        "scene-delegate에-대해-설명하시오": "/1da5c7c4-77b5-078d-7d51-cb4af2a594be", 
        
        "delegate란-무언인가-설명하고-retain-되는지-안되는지-그-이유를-함께-설명하시오": "/b859a722-c185-18ca-40e3-ff2874327645", 
        
        "uikit-클래스들을-다룰-때-꼭-처리해야하는-애플리케이션-쓰레드-이름은-무엇인가": "/3298b635-b078-7690-5cf0-2c5ad08df3f1", 
        
        "오토레이아웃을-코드로-작성하는-방법은-무엇인가-3가지": "/31b7b10d-02ae-8cf6-064d-5bfb2cc11000", 
        
        "오토-레이아웃-기반-뷰에-cornerradius-적용하기": "/a3a7ad89-8247-c3be-a830-793149274df0", 
        
        "코드로-버튼에-이미지와-텍스트-넣기": "/a1e1ff84-afb9-3cd4-779b-ffac01f78ed8", 
        
        "uiview-cliptobounds와-layer-maskstobounds": "/10a55411-2e65-1d24-1465-93b6a7ef8317", 
        
        "컬렉션뷰-최상단으로-이동하기": "/794a8fe6-1bd9-f907-b97f-5c8d58f174c9", 
        
        "커스텀-셀-적용하기": "/e6ad015d-77c7-a653-dd35-5830c489dcd0", 
        
        "layoutmarginsguide-safearealayoutguide": "/0f24fcbb-ce52-e617-1f35-7592cc832513", 
        
        "네비게이션-타이틀-변경": "/a0ff24e0-518a-643b-b9e1-4d0f26ae6faa", 
        
        "뷰의-그림자-만들기": "/8f337062-db00-d89b-5151-0e2eec7ebf30", 
        
        "스토리보드없이-코드로-개발하기": "/8e6f8bf9-13fb-aef8-f6d5-701c02bc7ec2", 
        
        "긍정적인-guard-사용": "/21b56994-cc18-9f41-e982-cf9735b9d345", 
        
        "학습-정리": "/116c4063-ed05-65d1-2e79-b2024a9706cb", 
        
        "rxswift-completable": "/fc8764e8-1faa-3b9c-2220-92d0898700d0", 
        
        "rxswift-maybe": "/438a434c-e450-d3d8-a28c-3dbf1aed01f3", 
        
        "rxswift-single": "/22b54afe-9f09-0d87-860f-a50de5b642ae", 
        
        "uitextfield-text의-변경을-감지하지-못할-때": "/71f3e025-53b0-9a83-78df-fbf9c5bba6f6", 
        
        "meet-async-await-in-swift": "/d749ec3d-86c8-8b21-144b-74fa7b69819a", 
        
        "uimenu-사용해보기": "/175c0e8e-dcc4-2838-4b58-30c0ac22f9e4", 
        
        "오디오-녹음-재생-저장하기": "/b3ea49d4-8f7a-b9e0-2427-fd3b1e243fd8", 
        
        "userdefaults-keychain-core-data": "/3efa3d59-c701-1158-7923-59270f51357b", 
        
        "uistackview": "/5b441ad2-f77c-e2c0-5787-e4ed4138ec3c", 
        
        "리눅스-입문자를-위한-명령어-사전": "/bc24663e-8037-285f-8159-94f8b91384e1", 
        
        "터미널에서-명령어로-마크다운-파일-만들기": "/1114d9a9-1eb1-1bf3-4819-6612d416beda", 
        
        "repository-패턴": "/e41ac27e-0ce9-c443-2af4-7ceef30ec815", 
        
        "rxswiftext-일부-연산자-정리": "/847e6d25-0406-9f55-65ea-71fe4ead4c2f", 
        
        "처음-배우는-플라스크-웹-프로그래밍": "/a2ed4fc7-e0f5-7e9d-802f-0ef7e6a021d5", 
        
        "making-apps-with-core-data": "/0ce0a0ce-7b54-a57c-bd4d-8ccad29cc898", 
        
        "함께-자라기": "/7900102b-dad3-42b6-e1ff-bf18525660b2", 
        
        "비동기-메서드-테스트하기": "/ad1f874e-3ce1-2b9e-9b8e-bd8121e49b50", 
        
        "제대로-배우는-수학적-최적화": "/65ef6f13-238e-376b-c5d8-423601f482a5", 
        
        "컬렉션뷰에-뱃지-추가하기": "/354752f2-0c01-5d34-7214-bacd077e4153", 
        
        "사진-촬영-기능-구현하기": "/ad896c4a-9cb1-57eb-6f2d-ed0f91110a7f", 
        
        "커스텀-폰트-적용하기-with-dynamic-type": "/087cf713-71b1-fed1-92de-eb4eb894c0d4", 
        
        "원하는-위치의-셀로-이동": "/af9b3263-31b2-74e1-2656-1c20982834e6", 
        
        "중첩-클로저의-캡처-리스트": "/6e52590c-ff19-5ed6-6c98-ea043d0ef93a", 
        
        "시뮬레이터가-표시되지-않을-때": "/5a1edbef-5c3a-9582-4689-be1c9860dc57", 
        
        "throttle-debounce": "/255d538c-8044-4bbd-05a9-c125b5d505ee", 
        
        "포스터의-생성-시간-마지막-수정-시간-구하기": "/7de6818f-99cb-bdf9-8bb2-92c51770076e", 
        
        "moya-사용법": "/1ff142a9-0d9f-cb69-7893-6ed85e7501cc", 
        
        "동시성-프로그래밍": "/565ee835-604a-3913-13cd-7dd4e83143ef", 
        
        "writing-high-performance-swift-code": "/34dea93e-05e9-9d47-f058-328b54789fd3", 
        
        "swift-package-만들기": "/b6e7d281-7f11-d868-7945-9704afcaccaa", 
        
        "회사-프로젝트에-swiftgen-도입기": "/3acba79d-c253-a833-0fb8-9534af3cdffc", 
        
        "기업의-성공을-이끄는-developer-relations": "/f61f3b71-2fcb-fb9c-5bf6-8695576b8ada", 
        
        "회사-프로젝트에-swiftlint-도입기": "/98e2a8e5-c76c-0e4c-0d1c-d9c4ae71426c", 
        
        "reactorkit": "/10bb6466-6b17-6b9d-fcc7-09e3f262cdb1", 
        
        "live-activity": "/dda861ad-c5d0-9e0b-e516-e0ea209f7761", 
        
        "피-땀-리셋": "/765e8330-4b2a-eaae-e63c-53809a9db388", 
        
        "dateformatter-는-비싸다": "/e8ed064c-4163-90c1-170a-a1d09ecb6748", 
        
        "적정-소프트웨어-아키텍처": "/14542ed1-ffb9-c062-5b3a-828755257d2b", 
        
        "한-컴퓨터에-github-계정-여러개-쓰기": "/0356f2ee-7e47-af38-047f-c9f13e392d73", 
        
        "02장-url과-리소스": "/720b3660-1039-0fc7-54a4-48facfcfda5c", 
        
        "03장-http-메시지": "/2715b8ab-d021-6bef-7140-3387cd6c23fc", 
        
        "04장-커넥션-관리": "/40967902-b9d0-ed9e-7abd-8eb094e6c226", 
        
        "05장-웹-서버": "/4757f83b-b230-ecd5-01f0-03a532907199", 
        
        "06장-프락시": "/b1fec897-d012-3803-4224-a1fac06a14c4", 
        
        "07장-캐시": "/56808a7e-abd1-979f-c7f9-fc2a81ce05ca", 
        
        "10장-http-2-0": "/a976befd-aad6-2cc0-f1bd-650205528f98", 
        
        "11장-클라이언트-식별과-쿠키": "/820b29f3-5dd3-ec36-ff7d-46b2e110a122", 
        
        "12장-기본-인증": "/66a1b5e5-9448-4476-c36b-1c1d8b77d079", 
        
        "14장-보안-http": "/e2f40fd5-9d83-5d33-3945-d93010f32ce0", 
        
        "01장-http-개관": "/1342bd24-dee7-d8f6-b63c-909e6e026b54", 
        
        "15장-엔터티와-인코딩": "/e4f6b6ab-b3f5-5b26-2ff7-5df8e3a303a0", 
        
        "16장-국제화": "/c7c60c25-9bf8-d3ea-3d0a-0cc7a44a96f1", 
        
        "17장-내용-협상과-트랜스코딩": "/e064e862-9f12-7734-dbbd-b18a7676aa6a", 
        
        "외부-cocoapods-라이브러리-spm-으로-배포하기": "/1339c97d-6732-f545-94d4-6a7453b9e1b2", 
        
        "identifiable": "/23541f6b-c82d-d953-2284-dde1ad84ec46", 
        
        "root": "/a2bc19f8-43a2-68d3-81ae-3d280c221d20", 
        
        "thread-safety한-싱글톤": "/dcded7c6-5ce0-ebca-6536-e7323d041de4", 
        
        "safe-area-를-변경하려면": "/7cfc1bcf-a5a7-b153-4d67-19da5e04a55c", 
        
        "spm-패키지-dependency-설정하기": "/c7df7494-6ac2-77d5-5367-d34e3b260d71", 
        
        "github-action-에서-특정-label-이-붙은-pr-건너뛰기": "/0654680d-f102-7159-d06c-99f2e46aa34e", 
        
        "자식-뷰-컨트롤러에-이벤트가-전파되지-않음": "/641670cf-215e-936c-44df-1d00acf50e2f", 
        
        "tabview-scrollview": "/a6f7c741-4d45-d56e-7c60-aea6037ccc1a", 
        
        "http-완벽-가이드": "/35d2bb9e-3cea-3de7-4405-27f2965e2716", 
        
        "wiki": "/wiki/root-index/", 
        
        "하기-싫은-일은-작게-나누기": "/7c3093ec-e4ac-31f8-b22e-08c817377f1d"
        
    }
    </script>
        
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- 참고: https://jekyllrb.com/docs/liquid/filters/ -->
    <title>ReactorKit - 🌩️ 먹구름</title>

    <meta name="description" content="">
    <meta name="google-site-verification" content="xD2UvBTOH6xxBi9MseahHz4Nt9u2vYZbgY2wVo7Bdyc" />

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://localhost:4000/10bb6466-6b17-6b9d-fcc7-09e3f262cdb1">
    <link rel="alternate" type="application/rss+xml" title="🌩️ 먹구름" href="http://localhost:4000/feed.xml" />

    <meta property="og:type" content="website">
    <meta property="og:title" content="ReactorKit">
    <meta property="og:description" content="">
    <meta property="og:image" content="http://localhost:4000/resource/johngrib.png">
    <meta property="og:url" content="http://localhost:4000/10bb6466-6b17-6b9d-fcc7-09e3f262cdb1">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:url" content="http://localhost:4000/10bb6466-6b17-6b9d-fcc7-09e3f262cdb1" />
    <meta name="twitter:title" content="ReactorKit" />
    <meta name="twitter:description" content="" />

    <link rel="apple-touch-icon" sizes="57x57"        href="/resource/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60"        href="/resource/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72"        href="/resource/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76"        href="/resource/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114"      href="/resource/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120"      href="/resource/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144"      href="/resource/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152"      href="/resource/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180"      href="/resource/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/resource/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"   href="/resource/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"   href="/resource/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"   href="/resource/icon/favicon-16x16.png">
    <link rel="manifest" href="/resource/icon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/resource/icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=SAMPLE-VALUE"></script>
    <script>
        // https://gist.github.com/chrisveness/43bcda93af9f646d083fad678071b90a
        async function aesGcmDecrypt(ciphertext, password) {
            const pwUtf8 = new TextEncoder().encode(password);
            const pwHash = await crypto.subtle.digest('SHA-256', pwUtf8);
            const iv = ciphertext.slice(0,24).match(/.{2}/g).map(byte => parseInt(byte, 16));
            const alg = { name: 'AES-GCM', iv: new Uint8Array(iv) };
            const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['decrypt']);
            const ctStr = atob(ciphertext.slice(24));
            const ctUint8 = new Uint8Array(ctStr.match(/[\s\S]/g).map(ch => ch.charCodeAt(0)));
            const plainBuffer = await crypto.subtle.decrypt(alg, key, ctUint8);
            const plaintext = new TextDecoder().decode(plainBuffer);
            return plaintext;
        }
        async function aesGcmEncrypt(plaintext, password) {
            const pwUtf8 = new TextEncoder().encode(password);
            const pwHash = await crypto.subtle.digest('SHA-256', pwUtf8);
            const iv = crypto.getRandomValues(new Uint8Array(12));
            const alg = { name: 'AES-GCM', iv: iv };
            const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['encrypt']);
            const ptUint8 = new TextEncoder().encode(plaintext);
            const ctBuffer = await crypto.subtle.encrypt(alg, key, ptUint8);
            const ctArray = Array.from(new Uint8Array(ctBuffer));
            const ctStr = ctArray.map(byte => String.fromCharCode(byte)).join('');
            const ctBase64 = btoa(ctStr);
            const ivHex = Array.from(iv).map(b => ('00' + b.toString(16)).slice(-2)).join('');
            return ivHex+ctBase64;
        }

        aesGcmDecrypt('THIS-IS-SAMPLE-VALUE', 'http://localhost:4000')
            .then(function(ua) {
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', ua);
                console.log('The gtag config has been finished.');
            })
            .catch(function(error) {
                console.log(error);
                console.log('The gtag id is invalid.');
            });
    </script>



</head>
<header class="header">
    <div>
        <a class="site-title emoji" href="/">🌩️ 먹구름</a>
    </div>
    <div class="site-title-right-container">
        <a class="site-title-right" href="/about/">
            <span class="emoji">👻</span>
            <span> about</span>
        </a>
        <a class="site-title-right" id="random-button">
            <span class="emoji">🎲</span>
            <span> random</span>
        </a>
        <a class="site-title-right" href="/wiki/root-index/">
            <span class="emoji">🗂️</span>
            <span> index</span>
        </a>
        <a class="site-title-right" href="/blog/">
            <span class="emoji">💾</span>
            <span> blog</span>
        </a>
        <a class="site-title-right" href="/tag/">
            <span class="emoji">🏷️</span>
            <span> tag</span>
        </a>
        <a class="site-title-right" href="/search">
            <span class="emoji">🔍</span>
            <span> search</span>
        </a>
    </div>
</header>
<script async src="/js/shortcut.js"></script>

    <body>
        <div class="page-content">
            <div class="post">
                
<input type="hidden" id="thisName" value="/ReactorKit"/>
<div class="post">
    <header class="post-header">
        <h1 class="page-title">
            <a href="/10bb6466-6b17-6b9d-fcc7-09e3f262cdb1"> ReactorKit </a>
        </h1>
    
        <div class="history-button">
            <p><a href="https://github.com/jwonylee/jwonylee.github.io/blame/master/_wiki//ReactorKit.md" target="_blank">created: 2022.07.17</a></p>
            <p><a href="https://github.com/jwonylee/jwonylee.github.io/blame/master/_wiki//ReactorKit.md" target="_blank">updated: 2022.07.17</a></p>
            <p>
                <a href="https://github.com/jwonylee/jwonylee.github.io/edit/master/_wiki//ReactorKit.md">편집하기</a>
                /
                <a href="https://github.com/jwonylee/jwonylee.github.io/issues/new?title=ReactorKit&body=의견을%20남겨주세요">의견 남기기</a>
            </p>
        </div>

        <div id="parent-list"></div>



    <div class="post-tag">
    iOS
</div>




    </header>
    <article class="post-content">
        <ul id="markdown-toc">
  <li><a href="#reactorkit" id="markdown-toc-reactorkit">ReactorKit</a></li>
  <li><a href="#view" id="markdown-toc-view">View</a></li>
  <li><a href="#reactor" id="markdown-toc-reactor">Reactor</a></li>
  <li><a href="#advanced" id="markdown-toc-advanced">Advanced</a>    <ul>
      <li><a href="#global-states" id="markdown-toc-global-states">Global States</a></li>
      <li><a href="#view-communication" id="markdown-toc-view-communication">View Communication</a></li>
      <li><a href="#testing" id="markdown-toc-testing">Testing</a></li>
      <li><a href="#scheduling" id="markdown-toc-scheduling">Scheduling</a></li>
      <li><a href="#pulse" id="markdown-toc-pulse">Pulse</a></li>
    </ul>
  </li>
  <li><a href="#참고-자료" id="markdown-toc-참고-자료">참고 자료</a></li>
</ul>

<blockquote>
  <p><strong>Note</strong>
ReactorKit 공식문서를 참고하여 정리한 글입니다.</p>
</blockquote>

<h2 id="reactorkit">ReactorKit</h2>

<ul>
  <li>반응형 + 단방향 스위프트 어플리케이션 아키텍처 프레임워크</li>
  <li>Flux + Reactive Programming</li>
</ul>

<h2 id="view">View</h2>

<ul>
  <li>ViewController, Cell 은 View 로 취급한다.</li>
  <li>View 는 오로지 action stream 과 state stream 을 매핑하는 방법을 정의한다.</li>
  <li>기존 객체에 <code class="language-plaintext highlighter-rouge">View</code> 프로토콜을 채택한다. 그러면 자동으로 <code class="language-plaintext highlighter-rouge">reactor</code> 라는 이름의 프로퍼티를 갖게 된다. 이 프로퍼티는 외부에서 주입한다.</li>
  <li><code class="language-plaintext highlighter-rouge">reactor</code> 프로퍼티가 변경될 때, <code class="language-plaintext highlighter-rouge">bind(reactor:)</code> 메서드가 호출된다. action stream 과 state stream 을 바인딩하려면 이 메서드를 구현한다.</li>
  <li>Storyboard 를 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">StoryboardView</code> 프로퍼티를 채택한다. <code class="language-plaintext highlighter-rouge">View</code> 프로퍼티와 모든 것이 동일하지만, 한 가지 다른 점은 <code class="language-plaintext highlighter-rouge">StroyboardView</code> 는 뷰가 로드 된 후(viewDidLoad)에 바인딩을 한다.</li>
</ul>

<h2 id="reactor">Reactor</h2>

<ul>
  <li>뷰의 상태를 관리하는 UI와 독립적인 레이어다.</li>
  <li>reactor 의 가장 중요한 것은 뷰의 제어 흐름(control flow)을 분리하는 것이다.</li>
  <li>모든 뷰는 그에 상응하는 reactor 를 가지고 있으며, 모든 로직을 reactor 에 위임한다.</li>
  <li>reactor 는 view 에 의존성을 갖고 있지 않기 때문에 테스트가 쉽다.</li>
  <li>reactor 를 정의하려면 <code class="language-plaintext highlighter-rouge">Reactor</code> 프로토콜을 채택한다. 이 프로토콜은 세 개의 타입 정의를 요구한다. 또한 <code class="language-plaintext highlighter-rouge">initialState</code> 라는 프로퍼티를 요구한다.
    <ul>
      <li>Action: 사용자의 상호 작용을 나타낸다.</li>
      <li>Mutation: Action 과 State 사이의 중간 역할을 한다.</li>
      <li>State: 뷰의 상태를 나타낸다.</li>
    </ul>
  </li>
  <li>reactor 는 두 개의 단계로 action stream 을 state stream 로 변환한다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mutate()</code>, <code class="language-plaintext highlighter-rouge">reduce()</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">mutate()</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mutate()</code> 는 Action 을 받아서 <code class="language-plaintext highlighter-rouge">Observable&lt;Mutation&gt;</code>으로 만든다.</li>
      <li><code class="language-plaintext highlighter-rouge">func mutate(action: Action) -&gt; Observable&lt;Mutation&gt;</code>
        <ul>
          <li>비동기 operation 혹은 API 콜과 같은 모든 사이드 이펙트는 이 메서드에서 실행된다.</li>
        </ul>
      </li>
    </ul>

    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">func</span> <span class="nf">mutate</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="kt">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Mutation</span><span class="o">&gt;</span> <span class="p">{</span>
  	<span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
  		<span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">refreshFollowingStatus</span><span class="p">(</span><span class="n">userID</span><span class="p">):</span> <span class="c1">// receive an action</span>
  			<span class="k">return</span> <span class="kt">UserAPI</span><span class="o">.</span><span class="nf">isFollowing</span><span class="p">(</span><span class="n">userID</span><span class="p">)</span> <span class="c1">// create an API stream</span>
  			<span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="nv">isFollowing</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Mutation</span> <span class="k">in</span>
  				<span class="k">return</span> <span class="kt">Mutation</span><span class="o">.</span><span class="nf">setFollowing</span><span class="p">(</span><span class="n">isFollowing</span><span class="p">)</span> <span class="c1">// convert to Mutation stream</span>
  			<span class="p">}</span>
  		<span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">follow</span><span class="p">(</span><span class="n">userID</span><span class="p">):</span>
  			<span class="k">return</span> <span class="kt">UserAPI</span><span class="o">.</span><span class="nf">follow</span><span class="p">()</span>
  			<span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="kt">Mutation</span> <span class="k">in</span>
  				<span class="k">return</span> <span class="kt">Mutation</span><span class="o">.</span><span class="nf">setFollowing</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
  			<span class="p">}</span>
  	<span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">reduce()</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">reduce()</code>는 이전의 <code class="language-plaintext highlighter-rouge">State</code>와 <code class="language-plaintext highlighter-rouge">Mutation</code>으로부터 새로운 <code class="language-plaintext highlighter-rouge">State</code>를 만든다.</li>
      <li><code class="language-plaintext highlighter-rouge">func reduce(state: State, mutation: Mutation) -&gt; State</code>
        <ul>
          <li>이 메서드는 순수 함수이다. 오로지 동기적으로 새로운 <code class="language-plaintext highlighter-rouge">State</code>를 반환해야 한다. 이 메서드에서 어떠한 사이드 이펙트도 만들면 안된다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">transform()</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">transform()</code> 는 스트림을 각각 변환시킨다. 세 개의 <code class="language-plaintext highlighter-rouge">transform()</code> 메서드가 있다.</li>
    </ul>

    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">func</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span>
  <span class="kd">func</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">mutation</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Mutation</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Mutation</span><span class="o">&gt;</span>
  <span class="kd">func</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">State</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">State</span><span class="o">&gt;</span>
</code></pre></div>    </div>

    <ul>
      <li>이러한 메서드를 구현하여 다른 관찰 가능한 스트림과 변환하고 결합하라. 예를 들어, <code class="language-plaintext highlighter-rouge">transform(mutation:)</code> 는 전역 이벤트 스트림(global event stream)을 mutation stream 과 조합하기에 좋은 장소이다. Global States 섹션에서 더 자세한 것을 살펴볼 수 있다.</li>
      <li>디버깅을 목적으로 사용할 수도 있다.</li>
    </ul>

    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">func</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Action</span><span class="o">&gt;</span> <span class="p">{</span>
  	<span class="k">return</span> <span class="n">action</span><span class="o">.</span><span class="nf">debug</span><span class="p">(</span><span class="s">"action"</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="advanced">Advanced</h2>

<h3 id="global-states">Global States</h3>

<p>Redux와 달리, ReactorKit 은 앱의 전역 상태를 제공하지 않는다. 이것이 의미하는 바는 전역 상태를 관리하기 위해 무엇이든 사용할 수 있다는 것이다. <code class="language-plaintext highlighter-rouge">BehaviorSubject</code>, <code class="language-plaintext highlighter-rouge">PublishSubject</code> 혹은 reactor 조차 사용할 수 있다. ReactorKit 은 global state 를 가지는 것을 강제하지 않는다. 그래서 애플리케이션의 특정 기능에 ReactorKit 을 사용할 수 있다.</p>

<p><strong>Action -&gt; Mutation -&gt; State</strong> 흐름에는 global state 가 없다. <code class="language-plaintext highlighter-rouge">transform(mutation:)</code> 을 사용해서 global state 를 mutation 으로 변환할 수 있다. 현재 인증된 사용자를 저장하는 global <code class="language-plaintext highlighter-rouge">BehaviorSubject</code> 를 가진다고 가정해보자. <code class="language-plaintext highlighter-rouge">Mutation.setUser(User?)</code> 를 방출하고 싶다면, <code class="language-plaintext highlighter-rouge">currentUser</code> 가 변경될 때, 다음과 같이 할 수 있다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">currentUser</span><span class="p">:</span> <span class="kt">BehaviorSubject</span><span class="o">&lt;</span><span class="kt">User</span><span class="o">&gt;</span> <span class="c1">// global state</span>

<span class="kd">func</span> <span class="nf">transform</span><span class="p">(</span><span class="nv">mutation</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Mustation</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observavle</span><span class="o">&lt;</span><span class="kt">Mustation</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kt">Observable</span><span class="o">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">mutation</span><span class="p">,</span> <span class="n">currentUser</span><span class="o">.</span><span class="nf">map</span><span class="p">(</span><span class="kt">Mutation</span><span class="o">.</span><span class="n">setUser</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></div>

<p>그런 다음 view가 reactor에 action을 보내고 <code class="language-plaintext highlighter-rouge">currentUser</code> 가 변경될 때마다 mutation이 방출된다.</p>

<h3 id="view-communication">View Communication</h3>

<p>여러 뷰 사이의 통신을 하기 위해 callback closure 혹은 delegate 패턴에 익숙해져야 한다. 이를 위해 Reacotkit 은 reactive extensions 사용을 추천한다. 일반적으로 가장 자주 사용되는 <code class="language-plaintext highlighter-rouge">Control Event</code>의 <code class="language-plaintext highlighter-rouge">UIButton.rx.tap</code> 이 있다. 핵심 개념은 커스텀 뷰를 UIButton 이나 UILabel 처럼 다루는 것이다.</p>

<p>메세지를 보여주는 <code class="language-plaintext highlighter-rouge">ChatViewController</code> 를 가지고 있다고 가정해보자. <code class="language-plaintext highlighter-rouge">ChatViewController</code>는 <code class="language-plaintext highlighter-rouge">MessageInputView</code> 를 소유하고 있다. 사용자가 <code class="language-plaintext highlighter-rouge">MessageInputView</code>에 있는 보내기 버튼을 탭했을 때, 텍스트는 <code class="language-plaintext highlighter-rouge">ChatViewController</code> 에 보내져야 한다. 그리고 <code class="language-plaintext highlighter-rouge">ChatViewController</code> 는 이를 reactor의 액션과 묶어야 한다. (bind)</p>

<p>아래는 <code class="language-plaintext highlighter-rouge">MessageInputView</code> 의 reative extension 을 활용한 예시이다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">Reactive</span> <span class="k">where</span> <span class="kt">Base</span><span class="p">:</span> <span class="kt">MessageInputView</span> <span class="p">{</span>
	<span class="k">var</span> <span class="nv">sendButtonTap</span><span class="p">:</span> <span class="kt">ControlEvent</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="p">{</span>
		<span class="k">let</span> <span class="nv">source</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">sendButton</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">tap</span><span class="o">.</span><span class="nf">withLatestFrom</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
		<span class="k">return</span> <span class="kt">ControlEvent</span><span class="p">(</span><span class="nv">events</span><span class="p">:</span> <span class="n">source</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이 익스텐션을 <code class="language-plaintext highlighter-rouge">ChatVeiwController</code>에서 사용할 수 있다:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">Reactive</span> <span class="k">where</span> <span class="kt">Base</span><span class="p">:</span> <span class="kt">MessageInputView</span> <span class="p">{</span>
	<span class="k">var</span> <span class="nv">sendButtonTap</span><span class="p">:</span> <span class="kt">ControlEvent</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="p">{</span>
		<span class="k">let</span> <span class="nv">source</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">sendButton</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">tap</span><span class="o">.</span><span class="nf">withLatestFrom</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
		<span class="k">return</span> <span class="kt">ControlEvent</span><span class="p">(</span><span class="nv">events</span><span class="p">:</span> <span class="n">source</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="testing">Testing</h3>

<p>ReactiorKit 은 테스트를 위한 기능이 내장되어 있다.</p>

<p><strong>What to test (무엇을 테스트?)</strong></p>

<p>우선 무엇을 테스트할 지 결정해야 한다. 두 개의 테스트가 있다: view 와 reactor</p>

<ul>
  <li>View
    <ul>
      <li>Action: 주어진 사용자 상호작용이 reactor에게 적절히 보내졌는가?</li>
      <li>State: 뷰의 속성이 state 에 맞게 제대로 설정되었는가?</li>
    </ul>
  </li>
  <li>Reactor
    <ul>
      <li>State: state가 action에 맞춰 적절히 변경되었는가?</li>
    </ul>
  </li>
</ul>

<p><strong>View testing</strong></p>

<p>뷰는 stub reactor 에서 테스트 할 수 있다. reactor는 <code class="language-plaintext highlighter-rouge">stub</code> 이라는 actions 를 기록하고, state를 강제로 변경하는 프로퍼티를 가진다. reactor의 stub 을 활성화 하면, <code class="language-plaintext highlighter-rouge">mutate()</code> 와 <code class="language-plaintext highlighter-rouge">reduce()</code> 둘 다 실행되지 않는다. stub은 다음과 같은 프로퍼티들을 가진다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">StateRelay</span><span class="o">&lt;</span><span class="kt">Reactor</span><span class="o">.</span><span class="kt">State</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="k">var</span> <span class="nv">action</span><span class="p">:</span> <span class="kt">ActionSubject</span><span class="o">&lt;</span><span class="kt">Reactor</span><span class="o">.</span><span class="kt">Action</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="k">var</span> <span class="nv">actions</span><span class="p">:</span> <span class="p">[</span><span class="kt">Reactor</span><span class="o">.</span><span class="kt">Action</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span> <span class="c1">// recorded actions</span>
</code></pre></div></div>

<p>테스트 케이스 예제가 있다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">testAction_refresh</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// 1. stub reactor 를 준비한다.</span>
	<span class="k">let</span> <span class="nv">reactor</span> <span class="o">=</span> <span class="kt">MyReactor</span><span class="p">()</span>
	<span class="n">reactor</span><span class="o">.</span><span class="n">isStubEnabled</span> <span class="o">=</span> <span class="kc">true</span>

	<span class="c1">// 2. strub reactor 와 함께 view 를 준비한다.</span>
	<span class="k">let</span> <span class="nv">view</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span>
	<span class="n">view</span><span class="o">.</span><span class="n">reactor</span> <span class="o">=</span> <span class="n">reactor</span>
	
	<span class="c1">// 3. 사용자 상호 작용을 보낸다.</span>
	<span class="n">view</span><span class="o">.</span><span class="n">refreshControl</span><span class="o">.</span><span class="nf">sendActions</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">valueChanged</span><span class="p">)</span>
	
	<span class="c1">// 4. actions 를 검증한다.</span>
	<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">reactor</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">last</span><span class="p">,</span> <span class="o">.</span><span class="n">refresh</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">testState_isLoading</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// 1. stub reactor 를 준비한다.</span>
	<span class="k">let</span> <span class="nv">reactor</span> <span class="o">=</span> <span class="kt">MyReactor</span><span class="p">()</span>
	<span class="n">reactor</span><span class="o">.</span><span class="n">isStubEnabled</span> <span class="o">=</span> <span class="kc">true</span>
	
	<span class="c1">// 2. strub reactor 와 함께 view 를 준비한다.</span>
	<span class="k">let</span> <span class="nv">view</span> <span class="o">=</span> <span class="kt">MyView</span><span class="p">()</span>
	<span class="n">view</span><span class="o">.</span><span class="n">reactor</span> <span class="o">=</span> <span class="n">reactor</span>
	
	<span class="c1">// 3. stub 의 상태를 설정한다.</span>
	<span class="n">reactor</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kt">MyReactor</span><span class="o">.</span><span class="kt">State</span><span class="p">(</span><span class="nv">isLoading</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
	
	<span class="c1">// 4. view 의 속성을 검증한다.</span>
	<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">activityIndicator</span><span class="o">.</span><span class="n">isAnimating</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Reactor testing</strong></p>

<p>reactor 의 테스트는 독립적이다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">testIsBookmarked</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">let</span> <span class="nv">reactor</span> <span class="o">=</span> <span class="kt">MyReactor</span><span class="p">()</span>

	<span class="n">reactor</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="nf">onNext</span><span class="p">(</span><span class="o">.</span><span class="n">toggleBookmarked</span><span class="p">)</span>
	<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">reactor</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">isBookmarked</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

	<span class="n">reactor</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="nf">onNext</span><span class="p">(</span><span class="o">.</span><span class="n">toggleBookmarked</span><span class="p">)</span>
	<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">reactor</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">isBookmarked</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div></div>

<p>때때로 상태는 한 번의 action 을 위해 한 번보다 많이 변한다. 예를 들어, <code class="language-plaintext highlighter-rouge">.refresh</code> action은 처음에 <code class="language-plaintext highlighter-rouge">state.isLoading</code>을 <code class="language-plaintext highlighter-rouge">true</code>로 설정하고, 새로고침 후에 <code class="language-plaintext highlighter-rouge">false</code>로 설정한다. 이 경우에 있어서 <code class="language-plaintext highlighter-rouge">state.isLoading</code>과 <code class="language-plaintext highlighter-rouge">currentState</code> 는 테스트하기 어렵다. 그래서 아마 <code class="language-plaintext highlighter-rouge">RxTest</code> 또는 <code class="language-plaintext highlighter-rouge">RxExpect</code>가 필요하다. 여기 <code class="language-plaintext highlighter-rouge">RxSwift</code> 를 이용한 테스트 케이스 예시가 있다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">testIsLoading</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// given</span>
	<span class="k">let</span> <span class="nv">scheduler</span> <span class="o">=</span> <span class="kt">TestScheduler</span><span class="p">(</span><span class="nv">initialClock</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
	<span class="k">let</span> <span class="nv">reactor</span> <span class="o">=</span> <span class="kt">MyReactor</span><span class="p">()</span>
	<span class="k">let</span> <span class="nv">disposeBag</span> <span class="o">=</span> <span class="kt">DisposeBag</span><span class="p">()</span>
	
	<span class="c1">// when</span>
	<span class="n">scheduler</span>
		<span class="o">.</span><span class="nf">createHotObservable</span><span class="p">([</span>
		<span class="o">.</span><span class="nf">next</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="o">.</span><span class="n">refresh</span><span class="p">)</span> <span class="c1">// send .refresh at 100 scheduler time</span>
		<span class="p">])</span>
		<span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">reactor</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
		<span class="o">.</span><span class="nf">disposed</span><span class="p">(</span><span class="nv">by</span><span class="p">:</span> <span class="n">disposeBag</span><span class="p">)</span>
		
	<span class="c1">// then</span>
	<span class="k">let</span> <span class="nv">response</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">date</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">subscribed</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">disposed</span><span class="p">:</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">reactor</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="nf">map</span><span class="p">(\</span><span class="o">.</span><span class="n">isLoading</span><span class="p">)</span>
	<span class="p">}</span>
	
	<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="nf">map</span><span class="p">(\</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">element</span><span class="p">),</span> <span class="p">[</span>
		<span class="kc">false</span><span class="p">,</span> <span class="c1">// initial state</span>
		<span class="kc">true</span><span class="p">,</span>  <span class="c1">// just after .refresh</span>
		<span class="kc">false</span>  <span class="c1">// after refreshing</span>
	<span class="p">])</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="scheduling">Scheduling</h3>

<p><code class="language-plaintext highlighter-rouge">scheduler</code> 프로퍼티를 정의한다.</p>

<p>state stream을 줄이고 관찰하는 데 사용되는 스케줄러를 지정하기 위해 scheduler 프로퍼티를 정의하라. 이 queue는 serial queue이어야 한다. 기본 스케줄러는 <code class="language-plaintext highlighter-rouge">CurrentThreadScheduler</code> 이다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">MyReactor</span><span class="p">:</span> <span class="kt">Reactor</span> <span class="p">{</span>
	<span class="k">let</span> <span class="nv">scheduler</span><span class="p">:</span> <span class="kt">Scheduler</span> <span class="o">=</span> <span class="kt">SerialDispatchQueueScheduler</span><span class="p">(</span><span class="nv">qos</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">)</span>
	
	<span class="kd">func</span> <span class="nf">reduce</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">State</span><span class="p">,</span> <span class="nv">mutation</span><span class="p">:</span> <span class="kt">Mutation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">State</span> <span class="p">{</span>
		<span class="c1">// executed in a background thread</span>
		<span class="nf">heavyAndImportantCalculation</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">state</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="pulse">Pulse</h3>

<p><code class="language-plaintext highlighter-rouge">Pulse</code>는 변화가 있을 때만 차이가 있다. 아래 예시로 살펴보자.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">messagePulse</span><span class="p">:</span> <span class="kt">Pulse</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">?</span><span class="o">&gt;</span> <span class="o">=</span> <span class="kt">Pulse</span><span class="p">(</span><span class="nv">wrappedValue</span><span class="p">:</span> <span class="s">"Hello tokijh"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">oldMessagePulse</span><span class="p">:</span> <span class="kt">Pulse</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">?</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">messagePulse</span>
<span class="n">messagePulse</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">"Hello tokijh"</span> <span class="c1">// add valueUpdatedCount +1</span>
<span class="n">oldMessagePulse</span><span class="o">.</span><span class="n">valueUpdatedCount</span> <span class="o">!=</span> <span class="n">messagePulse</span><span class="o">.</span><span class="n">valueUpdatedCount</span> <span class="c1">// true</span>
<span class="n">oldMessagePulse</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">messagePulse</span><span class="o">.</span><span class="n">value</span> <span class="c1">// true</span>
</code></pre></div></div>

<p>동일한 값인 경우에도 새 값이 할당된 경우에만 이벤트를 수신할 때 사용한다. 경고 메시지를 띄우는 경우를 예로 들 수 있다. 이러한 경우를 위해 Pulse 를 사용하면, 값이 중복되어 들어오더라도(연속적으로 똑같은 에러 메시지를 표시애햐 할 때) 사용자에게 경고 메시지를 보여줄 수 있다.</p>

<h2 id="참고-자료">참고 자료</h2>

<ul>
  <li><a href="https://github.com/ReactorKit/ReactorKit">ReactorKit/ReactorKit: A library for reactive and unidirectional Swift applications</a></li>
</ul>

    </article>


    
    <div class="giscus"></div>
    <div class="post-comments">
    <script src="https://giscus.app/client.js"
        data-repo="jwonylee/jwonylee.github.io"
        data-repo-id="SAMPLE-VALUE"
        data-category="Announcements"
        data-category-id="SAMPLE-VALUE"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="ko"
        crossorigin="anonymous"
        data-mapping="specific"
        data-term=""
        data-strict="0"
        async>
    </script>
    </div>



</div>
<script async src="/js/create-link.js"></script>


<script async>
    ;(function() {
        const tableList = document.querySelectorAll('.table-generate');

        if (tableList == null) {
            return;
        }

        for (let i = 0; i < tableList.length; i++) {
            const ul = tableList[i];
            const draw = {
                th: '',
                td: ''
            };

            const rows = ul.children;
            for (let j = 0; j < rows.length; j++) {
                const row = rows[j].children[0];
                const columns = row.children;
                const isHeader = /^th/.test(rows[j].innerHTML);
                const colTag = isHeader ? 'th' : 'td';

                let colData = '';
                for (let k = 0; k < columns.length; k++) {
                    const column = columns[k];
                    const content = column.innerHTML;
                    colData += `<${colTag}>${content}</${colTag}>`;
                }

                const trHtml = `<tr>${colData}</tr>`

                draw[colTag] += trHtml;
            }

            const result = `
                <table>
                    <thead>${draw.th}</thead>
                    <tbody>${draw.td}</tbody>
                </table>`

            const targetId = ul.getAttribute('data-target-id');
            document.getElementById(targetId).innerHTML = result;
            ul.remove();
        }
    })();
    ;(function() {
        const source = document.querySelectorAll('.dynamic-insert');

        if (source == null) {
            return;
        }

        for (let i = 0; i < source.length; i++) {
            const item = source[i];

            const target = item.getAttribute('data-target-selector');
            document.querySelector(target).innerHTML = item.outerHTML;
            item.remove();
        }
    })();
</script>


<script async src="/js/parent.js"></script>
<script async src="/js/toc-highlight.js"></script>

            </div>
        </div>
        <footer class="footer">
    <div>

        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    </div>

    <script data-ad-client="SAMPLE-VALUE" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</footer>
    </body>
</html>
