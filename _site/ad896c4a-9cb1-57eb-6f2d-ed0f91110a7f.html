<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ğŸ¯ UIImagePickerControllerë¥¼ ì´ìš©í•´ì„œ ì‚¬ì§„ ì´¬ì˜ ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°
</code></pre></div></div>

<p>iOSì—ì„œ ì¹´ë©”ë¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ, <code class="language-plaintext highlighter-rouge">AVFoundation</code>ì— <code class="language-plaintext highlighter-rouge">AVCam</code>ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ê³¼ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. <code class="language-plaintext highlighter-rouge">AVCam</code>ì€ iOS 13 ì´ìƒ, <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ëŠ” iOS 10 ì´ìƒì„ ì§€ì›í•œë‹¤. ìš°ë¦¬ ì•±ì€ iOS 13ë¶€í„° ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì–´ëŠ ë°©ë²•ì„ ì„ íƒí•´ë„ ë¬´ê´€í–ˆìœ¼ë‚˜, <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ê°€ êµ¬í˜„ì´ ê°„ë‹¨í•´ì„œ ì´ ë°©ì‹ì„ ì„ íƒí–ˆë‹¤.</p>

<h2 id="í™”ë©´-êµ¬ì„±">í™”ë©´ êµ¬ì„±</h2>

<p><img src="/assets/img/take-a-photo/ui.png" width="50%" alt="í™”ë©´ êµ¬ì„±" /></p>

<p>í™”ë©´ì€ ìŠ¤í† ë¦¬ë³´ë“œë¡œ ê°„ë‹¨í•˜ê²Œ ì´¬ì˜í•œ ì‚¬ì§„ì„ ë³´ì—¬ì¤„ ì´ë¯¸ì§€ë·°ì™€ ì‚¬ì§„ ì´¬ì˜ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ìœ¼ë¡œ êµ¬ì„±í–ˆë‹¤.</p>

<p>êµ¬ì„±í•œ ë·°ë¥¼ ê°ê° ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì—°ê²°í•œë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">UIImageView</span><span class="o">!</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">tapped</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ì‚¬ì§„ ì´¬ì˜ ë²„íŠ¼</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="infoplist-ì¹´ë©”ë¼-ê¶Œí•œ-ì¶”ê°€">Info.plist ì¹´ë©”ë¼ ê¶Œí•œ ì¶”ê°€</h2>

<p>iOSì—ì„œ ì•±ì´ ì¹´ë©”ë¼ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì‚¬ìš©ìì—ê²Œ ëª…ì‹œì ìœ¼ë¡œ ê¶Œí•œì„ ìš”ì²­í•´ì•¼ í•œë‹¤. <code class="language-plaintext highlighter-rouge">Info.plist</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">Privacy - Camera Usage Description</code>ì„ ì¶”ê°€í•˜ê³ , ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì´ ì™œ í•„ìš”í•œì§€ì— ëŒ€í•œ ì„¤ëª…ì„ ì‘ì„±í•œë‹¤.</p>

<p><img src="/assets/img/take-a-photo/info.png" alt="Info.plist" /></p>

<h2 id="uiimagepickercontroller">UIImagePickerController</h2>

<blockquote>
  <p>A view controller that manages the system interfaces for taking pictures, recording movies, and choosing items from the user's media library.<br />
ì‚¬ì§„ì„ ì°ê³ , ë™ì˜ìƒì„ ë…¹í™”í•˜ê³ , ì‚¬ìš©ìì˜ ë¯¸ë””ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ í•­ëª©ì„ ì„ íƒí•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤.</p>
</blockquote>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">UIImageView</span><span class="o">!</span>
    <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">imagePickerController</span><span class="p">:</span> <span class="kt">UIImagePickerController</span> <span class="o">=</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">imagePickerController</span><span class="p">:</span> <span class="kt">UIImagePickerController</span> <span class="o">=</span> <span class="kt">UIImagePickerController</span><span class="p">()</span>
        <span class="n">imagePickerController</span><span class="o">.</span><span class="n">sourceType</span> <span class="o">=</span> <span class="o">.</span><span class="n">camera</span>
        <span class="n">imagePickerController</span><span class="o">.</span><span class="n">allowsEditing</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">imagePickerController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="k">return</span> <span class="n">imagePickerController</span>
    <span class="p">}()</span>

    <span class="c1">// ìƒëµ ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ ì´ìš©í•´ì„œ ì‚¬ì§„ì„ ì´¬ì˜í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">sourceType</code> í”„ë¡œí¼í‹°ë¥¼ <code class="language-plaintext highlighter-rouge">UIImagePickerController.SourceType.camera</code>ë¡œ ì§€ì •í•œë‹¤. ì´ ë°–ì—ë„ <code class="language-plaintext highlighter-rouge">.photoLibrary</code>, <code class="language-plaintext highlighter-rouge">.savedPhotosAlbum</code>ê°€ ìˆëŠ”ë° iOS 15ë¶€í„° <code class="language-plaintext highlighter-rouge">Deprecated</code> ë˜ì—ˆë‹¤. ë‚˜ì¤‘ì—ëŠ” <code class="language-plaintext highlighter-rouge">UIImagePickerController</code> ìì²´ê°€ ì‚¬ë¼ì§ˆ ìˆ˜ë„ ìˆì„ ê±° ê°™ë‹¤.</p>

<p>ì‚¬ì§„ ì´¬ì˜ ì´í›„ì— 1:1ë¡œ ì´ë¯¸ì§€ë¥¼ í¸ì§‘í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">allowsEditing</code>ì„ <code class="language-plaintext highlighter-rouge">true</code>ë¡œ ì§€ì •í•œë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">delegate</code>ë„ êµ¬í˜„í•´ì¤„ ì˜ˆì •ì´ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">delegate</code>ë„ ViewController(<code class="language-plaintext highlighter-rouge">self</code>)ë¡œ ì§€ì •í•œë‹¤.</p>

<h2 id="ì‚¬ì§„-ì´¬ì˜-ë²„íŠ¼-ì„ íƒ">ì‚¬ì§„ ì´¬ì˜ ë²„íŠ¼ ì„ íƒ</h2>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œí•˜ë©´ ì•Œì•„ì„œ ê¶Œí•œ ìš”ì²­ ì•ŒëŸ¿ì„ ë„ì›Œì¤€ë‹¤. ë¬¸ì œëŠ”, ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ê¶Œí•œ ê±°ë¶€ë¥¼ í•´ë„ ì´ë¯¸ ì¹´ë©”ë¼ í™”ë©´ì„ í‘œì‹œí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì•„ë¬´ê²ƒë„ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œí•˜ê¸° ì „ì— ë”°ë¡œ ê¶Œí•œ í™•ì¸ì„ í•˜ê³  í—ˆìš© ì‹œ ì‚¬ì§„ ì´¬ì˜ ì´ë™, ê±°ì ˆ ì‹œ ì„¤ì • í™”ë©´ìœ¼ë¡œ ì•ˆë‚´í•˜ëŠ” ì•ŒëŸ¿ í‘œì‹œí•˜ê²Œë” êµ¬ì„±í–ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œë§Œ í•´ë„ ê¶Œí•œ ìš”ì²­ì„ í•˜ë¯€ë¡œ ê¶Œí•œì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹°ê°€ ìˆëŠ”ì§€ í™•ì¸í–ˆì§€ë§Œ ì—†ì—ˆë‹¤. ëŒ€ì‹  <code class="language-plaintext highlighter-rouge">AVCaptureDevice</code> ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¹´ë©”ë¼ ê¶Œí•œ ì—¬ë¶€ í™•ì¸, ê¶Œí•œ ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤. <code class="language-plaintext highlighter-rouge">AVCaptureDeivce</code>ëŠ” <code class="language-plaintext highlighter-rouge">AVFoundation</code>ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">AVFoundation</code>ì„ import í•´ì•¼ í•œë‹¤.</p>

<h3 id="ê¶Œí•œ-ìš”ì²­ì„-ë°›ì€-ì ì´-ì—†ì„-ë•Œ--ê¶Œí•œ-í—ˆìš©-ì‹œ">ê¶Œí•œ ìš”ì²­ì„ ë°›ì€ ì ì´ ì—†ì„ ë•Œ || ê¶Œí•œ í—ˆìš© ì‹œ</h3>

<p>ê¶Œí•œì„ ìš”ì²­ë°›ì€ ì ì´ ì—†ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">AVCaptureDeivce.requestAccess(for:completionHandler:)</code>ë¥¼ ì‚¬ìš©í•´ì„œ ë”°ë¡œ ê¶Œí•œì„ ìš”ì²­í•œë‹¤. ê¶Œí•œì„ ìš”ì²­í•˜ê³  í—ˆê°€ë°›ì•˜ì„ ë•Œ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œí•˜ë©´ ì‚¬ìš©ìê°€ ì¹´ë©”ë¼ ì‚¬ìš© ê¶Œí•œì„ ê±°ë¶€í–ˆì„ ë•Œ ì•„ë¬´ê²ƒë„ ë³´ì´ì§€ ì•ŠëŠ” ì‚¬ì§„ ì´¬ì˜ í™”ë©´ ëŒ€ì‹  ê¶Œí•œì„ ì¬ìš”ì²­í•˜ëŠ” ì•ŒëŸ¿ì„ ë„ìš°ëŠ” ë“± ë³„ë„ì˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì‚¬ìš©ìê°€ ê¶Œí•œì„ í—ˆìš©í–ˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œí•œë‹¤. <code class="language-plaintext highlighter-rouge">AVCaptureDevice.requestAccess</code> í•¸ë“¤ëŸ¬ëŠ” Dispatch Queueì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">ê¶Œí•œ ìš”ì²­&gt;ê¶Œí•œ í—ˆìš©</code>ì¼ ë•Œ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ í‘œì‹œí•˜ë ¤ë©´ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì•¼ í•œë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">authorizationStatus</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">authorized</span><span class="p">:</span> <span class="c1">// ê¶Œí•œ í—ˆìš©</span>
        <span class="nf">present</span><span class="p">(</span><span class="n">imagePickerController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">notDetermined</span><span class="p">:</span> <span class="c1">// ê¶Œí•œ ìš”ì²­ì„ ë°›ì€ ì ì´ ì—†ìŒ</span>
        <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">requestAccess</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">granted</span> <span class="k">in</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">self</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="k">if</span> <span class="n">granted</span> <span class="p">{</span>
                <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
                    <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">imagePickerController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="c1">// ìƒëµ ...</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ê¶Œí•œ-ê±°ì ˆ-ì‹œ-ì„¤ì •-í™”ë©´ìœ¼ë¡œ-ì´ë™-ì•ˆë‚´-ì•ŒëŸ¿-í‘œì‹œ">ê¶Œí•œ ê±°ì ˆ ì‹œ ì„¤ì • í™”ë©´ìœ¼ë¡œ ì´ë™ ì•ˆë‚´ ì•ŒëŸ¿ í‘œì‹œ</h3>

<p>ê¶Œí•œì´ ê±°ì ˆë˜ì—ˆê±°ë‚˜, ì œí•œë˜ì—ˆì„ ë•ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ë³´í†µ ë‹¤ë¥¸ ì•±ì„ ë³´ë©´ ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì´ í•„ìš”í•œ ì´ìœ ë¥¼ ì„¤ëª…í•˜ë©´ì„œ ì•± ì„¤ì • í™”ë©´ìœ¼ë¡œ ì•ˆë‚´í•˜ëŠ” ì•ŒëŸ¿ì„ í‘œì‹œí•œë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// ì‚¬ìš©ìì—ê²Œ ì¹´ë©”ë¼ ì´¬ì˜ ê¶Œí•œì— ê´€í•œ ì•ŒëŸ¿ì„ í‘œì‹œí•œë‹¤.</span>
<span class="kd">func</span> <span class="nf">showMoveSettingAlert</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">alert</span><span class="p">:</span> <span class="kt">UIAlertController</span> <span class="o">=</span> <span class="kt">UIAlertController</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
                                                    <span class="nv">message</span><span class="p">:</span> <span class="s">"ì¹´ë©”ë¼ ì´¬ì˜ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</span><span class="se">\n</span><span class="s">ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”."</span><span class="p">,</span>
                                                    <span class="nv">preferredStyle</span><span class="p">:</span> <span class="o">.</span><span class="n">alert</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">cancleAction</span><span class="p">:</span> <span class="kt">UIAlertAction</span> <span class="o">=</span> <span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"ì·¨ì†Œ"</span><span class="p">,</span>
                                                    <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">,</span>
                                                    <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">settingAction</span><span class="p">:</span> <span class="kt">UIAlertAction</span> <span class="o">=</span> <span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"ì„¤ì •"</span><span class="p">,</span>
                                                    <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">,</span>
                                                    <span class="nv">handler</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">_</span> <span class="k">in</span>
        <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">moveAppSetting</span><span class="p">()</span>
    <span class="p">})</span>

    <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="n">cancleAction</span><span class="p">)</span>
    <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="n">settingAction</span><span class="p">)</span>
    <span class="nf">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">/// ì•± ì„¤ì • í™”ë©´ìœ¼ë¡œ ì´ë™í•œë‹¤.</span>
<span class="kd">func</span> <span class="nf">moveAppSetting</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">openSettingsURLString</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>

    <span class="k">if</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">canOpenURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì‚¬ì§„ ì´¬ì˜ ë²„íŠ¼ ì„ íƒ ì‹œ</span>
<span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">tapped</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">authorizationStatus</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ìƒëµ ...</span>
        <span class="k">case</span> <span class="o">.</span><span class="n">denied</span><span class="p">,</span> <span class="o">.</span><span class="nv">restricted</span><span class="p">:</span> <span class="c1">// ê¶Œí•œ ìš”ì²­ ê±°ë¶€, ì œí•œ</span>
            <span class="nf">showMoveSettingAlert</span><span class="p">()</span>
        <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span> <span class="c1">// ê·¸ ì™¸</span>
            <span class="nf">showMoveSettingAlert</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">Take a Button</code>ì„ ëˆ„ë¥´ë©´ ì‚¬ìš©ìì—ê²Œ ì¹´ë©”ë¼ ê¶Œí•œì„ ìš”ì²­í•˜ê³ , í—ˆìš© ì‹œ ì‚¬ì§„ ì´¬ì˜ í™”ë©´ì„ í‘œì‹œ / ê±°ë¶€ ì‹œ ì•± ì„¤ì • í™”ë©´ìœ¼ë¡œ ì•ˆë‚´í•˜ëŠ” ì•ŒëŸ¿ì„ í‘œì‹œí•œë‹¤.</p>

<h2 id="ì´¬ì˜í•œ-ì‚¬ì§„-í¸ì§‘--í¸ì§‘í•œ-ì´ë¯¸ì§€-í‘œì‹œ">ì´¬ì˜í•œ ì‚¬ì§„ í¸ì§‘ &amp;&amp; í¸ì§‘í•œ ì´ë¯¸ì§€ í‘œì‹œ</h2>

<p>ì´¬ì˜í•œ ì‚¬ì§„ì„ í¸ì§‘í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ ìƒì„±í•  ë•Œ <code class="language-plaintext highlighter-rouge">allowsEditing</code>ë¥¼ <code class="language-plaintext highlighter-rouge">true</code>ë¡œ ì§€ì •í–ˆì—ˆë‹¤. í¸ì§‘í•œ ì‚¬ì§„ì„ <code class="language-plaintext highlighter-rouge">imageView</code>ì— í‘œì‹œí•´ë³´ì.</p>

<h3 id="uinavigationcontrollerdelegate-uiimagepickercontrollerdelegate-êµ¬í˜„">UINavigationControllerDelegate, UIImagePickerControllerDelegate êµ¬í˜„</h3>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController.delegate</code> ëŠ” <code class="language-plaintext highlighter-rouge">UINavigationControllerDelegate</code>ê³¼ <code class="language-plaintext highlighter-rouge">UIImagePickerControllerDelegate</code>ë¥¼ ëª¨ë‘ ë§Œì¡±í•´ì•¼ í•œë‹¤. í¸ì§‘ì´ ëë‚œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">imagePickerController(_:didFinishPickingMediaWithInfo:)</code>ë¥¼ êµ¬í˜„í•œë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UINavigationControllerDelegate</span><span class="p">,</span> <span class="kt">UIImagePickerControllerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">imagePickerController</span><span class="p">(</span><span class="n">_</span> <span class="nv">picker</span><span class="p">:</span> <span class="kt">UIImagePickerController</span><span class="p">,</span> <span class="n">didFinishPickingMediaWithInfo</span> <span class="nv">info</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIImagePickerController</span><span class="o">.</span><span class="kt">InfoKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">picker</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">// í¸ì§‘ì´ ëë‚¬ìœ¼ë¯€ë¡œ UIImagePickerControllerë¥¼ ë‹«ëŠ”ë‹¤.</span>

        <span class="c1">// í¸ì§‘ëœ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="o">.</span><span class="n">editedImage</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">UIImage</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"No image found"</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>

        <span class="c1">// imageViewì— ì´ë¯¸ì§€ë¥¼ ì§€ì •í•œë‹¤.</span>
        <span class="n">imageView</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ì´ë¯¸ì§€-í¸ì§‘-ì‹œ-ì¤‘ì•™ìœ¼ë¡œ-ì´ë™í• -ìˆ˜-ì—†ëŠ”-ë¬¸ì œ">ì´ë¯¸ì§€ í¸ì§‘ ì‹œ ì¤‘ì•™ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œ</h3>

<p>ëë‚  ë•Œê¹Œì§€ ëë‚œ ê²Œ ì•„ë‹ˆë‹¤. ^_ã… </p>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ë¥¼ ì´ìš©í•´ ì‚¬ì§„ ì´¬ì˜ í›„, ì´ë¯¸ì§€ë¥¼ í¸ì§‘í•  ë•Œ ì´ë¯¸ì§€ ì¤‘ì•™ì—ì„œ ì´ë™í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ì°¾ì•„ë³´ë‹ˆ iOS 6ë¶€í„° ë°œìƒí•œ ê³ ì§ˆì ì¸ ë¬¸ì œë‹¤. iOS 15ê¹Œì§€ë„ ì—¬íƒœê» ê³ ì³ì§€ì§€ ì•Šì•˜ë‹¤.</p>

<p>ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ <a href="https://stackoverflow.com/questions/12630155/uiimagepicker-allowsediting-stuck-in-center">ìŠ¤íƒ ì˜¤ë²„í”Œë¡œ</a>ì—ì„œ í•´ê²°ì±…ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">UIImagePickerController</code>ì˜ ìµìŠ¤í…ì…˜ìœ¼ë¡œ ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤. ì›ë¬¸ì—ëŠ” iOS 11ì— ëŒ€ì‘í•˜ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë° ìš°ë¦¬ ì•±ì—ì„œëŠ” í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ì´ë¼ ì œê±°í–ˆë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">UIImagePickerController</span> <span class="p">{</span>
    <span class="kd">open</span> <span class="k">override</span> <span class="k">var</span> <span class="nv">childForStatusBarHidden</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>

    <span class="kd">open</span> <span class="k">override</span> <span class="k">var</span> <span class="nv">prefersStatusBarHidden</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="kd">open</span> <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLayoutSubviews</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLayoutSubviews</span><span class="p">()</span>
        <span class="nf">fixCannotMoveEditingBox</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">fixCannotMoveEditingBox</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">cropView</span> <span class="o">=</span> <span class="n">cropView</span><span class="p">,</span>
           <span class="k">let</span> <span class="nv">scrollView</span> <span class="o">=</span> <span class="n">scrollView</span><span class="p">,</span>
           <span class="n">scrollView</span><span class="o">.</span><span class="n">contentOffset</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>

            <span class="k">let</span> <span class="nv">top</span><span class="p">:</span> <span class="kt">CGFloat</span> <span class="o">=</span> <span class="n">cropView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">minY</span>
            <span class="k">let</span> <span class="nv">bottom</span> <span class="o">=</span> <span class="n">scrollView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">cropView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">top</span>
            <span class="n">scrollView</span><span class="o">.</span><span class="n">contentInset</span> <span class="o">=</span> <span class="kt">UIEdgeInsets</span><span class="p">(</span><span class="nv">top</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span> <span class="nv">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">bottom</span><span class="p">:</span> <span class="n">bottom</span><span class="p">,</span> <span class="nv">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

            <span class="k">var</span> <span class="nv">offset</span><span class="p">:</span> <span class="kt">CGFloat</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">scrollView</span><span class="o">.</span><span class="n">contentSize</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">scrollView</span><span class="o">.</span><span class="n">contentSize</span><span class="o">.</span><span class="n">width</span> <span class="p">{</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">scrollView</span><span class="o">.</span><span class="n">contentSize</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">scrollView</span><span class="o">.</span><span class="n">contentSize</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="n">scrollView</span><span class="o">.</span><span class="n">contentOffset</span> <span class="o">=</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="o">-</span><span class="n">top</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">asyncAfter</span><span class="p">(</span><span class="nv">deadline</span><span class="p">:</span> <span class="o">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
            <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">fixCannotMoveEditingBox</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">cropView</span><span class="p">:</span> <span class="kt">UIView</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">findCropView</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">scrollView</span><span class="p">:</span> <span class="kt">UIScrollView</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">findScrollView</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">findCropView</span><span class="p">(</span><span class="n">from</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">UIView</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIView</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">width</span> <span class="o">=</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">width</span>
        <span class="k">let</span> <span class="nv">size</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span>
        <span class="k">if</span> <span class="n">width</span> <span class="o">==</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">==</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">view</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">view</span> <span class="k">in</span> <span class="n">view</span><span class="o">.</span><span class="n">subviews</span> <span class="p">{</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">cropView</span> <span class="o">=</span> <span class="nf">findCropView</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">cropView</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">findScrollView</span><span class="p">(</span><span class="n">from</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">UIView</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIScrollView</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">scrollView</span> <span class="o">=</span> <span class="n">view</span> <span class="k">as?</span> <span class="kt">UIScrollView</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">scrollView</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">view</span> <span class="k">in</span> <span class="n">view</span><span class="o">.</span><span class="n">subviews</span> <span class="p">{</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">scrollView</span> <span class="o">=</span> <span class="nf">findScrollView</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">scrollView</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ì™„ì„±">ì™„ì„±</h2>

<p><img src="/assets/img/take-a-photo/complete.gif" alt="ë™ì‘ í™”ë©´" width="50%" /></p>

<p align="center">
<i>ë§ˆìš°ìŠ¤ì— ë¨¼ì§€ëŠ” ë¬´ì‹œí•´ì£¼ì„¸ìš”...</i>
</p>

<p>ë!</p>

<h2 id="íƒœê·¸">íƒœê·¸</h2>

<p>#iOS/UIImagePickerController</p>
